<%- include('./partials/header') %>

<div class="w-full min-h-screen flex items-start px-20 py-20">
  <!-- Sidebar -->
  <div class="w-[25%] flex h-screen flex-col items-start">
    <div class="flex flex-col">
      <a class="block w-fit mb-2" href="/admin">All Products</a>
      <a class="block w-fit mb-2" href="/admin/createProduct">Create new product</a>
      <a class="block w-fit mb-2 bg-red-500 text-white rounded-full p-2" href="/admin/logout">Logout </a>
    </div>
  </div>

  <!-- Products Section -->
  <div class="w-[75%] flex flex-col gap-5">
    <div class="flex justify-between items-center mb-3">
      <a class="text-red-500 hover:underline" href="/admin/deleteAll">Delete all</a>
      <h2 class="text-xl font-semibold text-gray-700">Product List</h2>
    </div>

    <div class="flex flex-wrap gap-6">
      <% if (products && products.length > 0) { %>
        <% products.forEach(product => { %>
          <div class="w-60 bg-white shadow-md hover:shadow-xl rounded-lg overflow-hidden transition-shadow duration-300">
            <div class="w-full h-52 bg-gray-100">
              <% if (product.image) { %>
                <img src="data:image/jpeg;base64,<%= product.image.toString('base64') %>" alt="<%= product.name %>" class="w-full h-full object-cover">
              <% } else { %>
                <div class="w-full h-full flex items-center justify-center text-gray-400 italic">No Image</div>
              <% } %>
            </div>

            <div class="px-4 py-3">
              <h3 class="font-semibold text-lg text-gray-800"><%= product.name %></h3>
              <h4 class="text-gray-600 mb-3">â‚¹ <%= product.price %></h4>

              <div class="flex justify-between items-center">
                <a href="/admin/deleteProduct/<%= product._id %>"
                   class="w-8 h-8 flex items-center justify-center rounded-full bg-red-500 text-white hover:bg-red-600 transition"
                   onclick="return confirm('Are you sure you want to delete this product?');">
                   <i class="ri-delete-bin-line text-lg"></i>
                </a>
              </div>
            </div>
          </div>
        <% }) %>
      <% } else { %>
        <p class="text-gray-500">No products available.</p>
      <% } %>
    </div>
  </div>
</div>

<%- include('./partials/footer') %>
