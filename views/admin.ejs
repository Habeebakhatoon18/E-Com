<%- include('./partials/header') %>

<div class="w-full min-h-screen flex items-start px-20 py-20">
  <!-- Sidebar -->
  <div class="w-[25%] flex h-screen flex-col items-start">
    <div class="flex flex-col">
      <a class="block w-fit mb-2" href="/admin">All Products</a>
      <a class="block w-fit mb-2" href="/admin/createProduct">Create new product</a>
    </div>
  </div>

  <!-- Products Section -->
  <div class="w-[75%] flex flex-col gap-5">
    <a class="text-red-500 hover:underline" href="/admin/deleteAll">Delete all</a>

    <div class="flex flex-wrap gap-6">
      <% if (products && products.length > 0) { %>
        <% products.forEach(product => { %>
          <div class="w-60 bg-white shadow-lg rounded-lg overflow-hidden">
            <div class="w-full h-52 bg-gray-100">
              <% if (product.image) { %>
                <img src="data:image/jpeg;base64,<%= product.image.toString('base64') %>"alt="<%= product.name %>" class="w-full h-full object-cover">
              <% } else { %>
                <div class="w-full h-full flex items-center justify-center text-gray-400 italic">No Image</div>
              <% } %>
            </div>
            <div class="flex justify-between items-center px-4 py-3">
              <div>
                <h3 class="font-semibold text-lg"><%= product.name %></h3>
                <h4 class="text-gray-600">â‚¹ <%= product.price %></h4>
              </div>
              <a href="/admin/add/<%= product._id %>"
                 class="w-7 h-7 flex items-center justify-center rounded-full bg-red-500 text-white hover:bg-red-600 transition">
                 <i class="ri-add-line"></i>
              </a>
            </div>
          </div>
        <% }) %>
      <% } else { %>
        <p class="text-gray-500">No products available.</p>
      <% } %>
    </div>
  </div>
</div>

<%- include('./partials/footer') %>
